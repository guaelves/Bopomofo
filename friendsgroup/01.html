<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>ㄅ的好朋友 點點名</title>
<style>
body {
  font-family: "Noto Sans TC", sans-serif;
  text-align: center;
  background: #f8f8f8;
  color: #333;
  max-width: 800px;
  margin: auto;
}

h1 {
  color: #00695c;
  margin-bottom: 0.2em;
}

.subtitle {
  font-size: 1.3em;
  color: #555;
  margin-bottom: 20px;
}

/* 大大的 ㄅ 方塊 */
.big-b {
  background: #bbdefb;
  color: #333;
  font-size: 16em;
  font-weight: bold;
  width: 200px;
  height: 200px;
  margin: 0 auto 15px auto;
  border-radius: 15px;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

/* === 結果區 === */
#result {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-bottom: 30px;
}

/* ㄅ + 韻母結果 (直式) */
.result-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-weight: bold;
  font-size: clamp(2em, 4vw, 3em);
  color: #00695c;
  user-select: none;
  line-height: 1.1;
}

.result-finish {
  width: 100%;
  text-align: center;
  font-size: 2.5em;
  color: #00695c;
  font-weight: bold;
  margin-top: 20px;
}

/* 按鈕 */
button {
  background: #009688;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  font-size: 1.2em;
  cursor: pointer;
  margin: 10px;
  transition: background 0.3s;
}
button:hover {
  background: #00796b;
}

/* tile 格子 */
.tile {
  background: white;
  border: 2px solid #ccc;
  border-radius: 10px;
  padding: 20px;
  font-size: 2em;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  user-select: none;
}
.tile:hover {
  transform: scale(1.05);
}
.correct { background: #d9fdd3; }
.wrong { background: #ffd6d6; }
.tone-selected { background: #fff9c4; border-color: #f0e68c; }

.section-title {
  font-weight: bold;
  margin-top: 30px;
  color: #444;
}

/* 格子排版 */
.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin: 20px auto;
  max-width: 700px;
}
.grid-5 {
  display: grid;
  grid-template-columns: repeat(5, 0.8fr);
  gap: 10px;
  margin: 20px auto;
  justify-content: center;
  max-width: 700px;
}
</style>
</head>
<body>

<h1>ㄅ的好朋友 點點名</h1>
<div class="subtitle">選出可以跟ㄅ一起拼音的符號</div>

<div class="big-b">ㄅ</div>

<div id="result"></div>

<button id="resetBtn">🔄 重新開始</button>

<!-- 聲調符號 -->
<div class="section-title">聲調符號</div>
<div class="grid-5">
  <div class="tile">一聲<br>「」</div>
  <div class="tile">二聲<br>「/」</div>
  <div class="tile">三聲<br>「V」</div>
  <div class="tile">四聲<br>「﹨」</div>
  <div class="tile">輕聲<br>「˙」</div>
</div>

<div class="section-title">介音</div>
<div class="grid">
  <div class="tile">ㄧ</div>
  <div class="tile">ㄨ</div>
  <div class="tile">ㄩ</div>
</div>

<div class="section-title">單韻母</div>
<div class="grid">
  <div class="tile">ㄚ</div>
  <div class="tile">ㄛ</div>
  <div class="tile">ㄜ</div>
  <div class="tile">ㄝ</div>
</div>

<div class="section-title">複韻母</div>
<div class="grid">
  <div class="tile">ㄞ</div>
  <div class="tile">ㄟ</div>
  <div class="tile">ㄠ</div>
  <div class="tile">ㄡ</div>
</div>

<div class="section-title">聲隨韻母</div>
<div class="grid">
  <div class="tile">ㄢ</div>
  <div class="tile">ㄣ</div>
  <div class="tile">ㄤ</div>
  <div class="tile">ㄥ</div>
</div>

<div class="section-title">捲舌韻母</div>
<div class="grid">
  <div class="tile">ㄦ</div>
</div>

<div class="section-title">結合韻</div>
<div class="grid">
  <div class="tile">ㄧ<br>ㄚ</div>
  <div class="tile">ㄧ<br>ㄛ</div>
  <div class="tile">ㄧ<br>ㄝ</div>
  <div class="tile">ㄧ<br>ㄞ</div>
  <div class="tile">ㄧ<br>ㄠ</div>
  <div class="tile">ㄧ<br>ㄡ</div>
  <div class="tile">ㄧ<br>ㄢ</div>
  <div class="tile">ㄧ<br>ㄣ</div>
  <div class="tile">ㄧ<br>ㄤ</div>
  <div class="tile">ㄧ<br>ㄥ</div>
  <div class="tile">ㄨ<br>ㄚ</div>
  <div class="tile">ㄨ<br>ㄛ</div>
  <div class="tile">ㄨ<br>ㄞ</div>
  <div class="tile">ㄨ<br>ㄟ</div>
  <div class="tile">ㄨ<br>ㄢ</div>
  <div class="tile">ㄨ<br>ㄣ</div>
  <div class="tile">ㄨ<br>ㄤ</div>
  <div class="tile">ㄨ<br>ㄥ</div>
  <div class="tile">ㄩ<br>ㄝ</div>
  <div class="tile">ㄩ<br>ㄢ</div>
  <div class="tile">ㄩ<br>ㄣ</div>
  <div class="tile">ㄩ<br>ㄥ</div>
</div>

<script>
  // ======== 音效 ========
  function playBeep(frequency, duration) {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.connect(gain);
    gain.connect(ctx.destination);
    osc.type = "sine";
    osc.frequency.value = frequency;
    gain.gain.setValueAtTime(0.1, ctx.currentTime);
    osc.start();
    osc.stop(ctx.currentTime + duration / 1000);
  }

  function playCorrect() {
    playBeep(880, 100);
    setTimeout(() => playBeep(1320, 100), 150);
  }
  function playWrong() {
    playBeep(220, 150);
    setTimeout(() => playBeep(150, 150), 200);
  }
  function playFireworks() {
    let freq = 1000;
    for (let i = 0; i < 5; i++) {
      setTimeout(() => playBeep(freq, 150), i * 200);
      freq += 200;
    }
  }

  // ㄅ的好朋友
  const goodFriends = [
    "ㄧ","ㄨ","ㄚ","ㄛ","ㄞ","ㄟ","ㄠ","ㄢ","ㄣ","ㄤ","ㄥ",
    "ㄧㄝ","ㄧㄠ","ㄧㄢ","ㄧㄣ","ㄧㄥ"
  ];

  const tiles = document.querySelectorAll('.tile');
  const resultDiv = document.getElementById('result');
  let selectedOrder = [];
  let hasWrong = false;

  tiles.forEach(tile => {
    tile.addEventListener('click', () => {
      const text = tile.innerText.replace(/\n/g, '');
      const parentGrid = tile.parentElement;
      const isToneTile = parentGrid.classList.contains('grid-5');

      if (isToneTile) {
        tile.classList.add('tone-selected');
        tile.classList.remove('correct', 'wrong');
        return;
      }

      tile.classList.remove('tone-selected');

      if (goodFriends.includes(text)) {
        if (!selectedOrder.includes(text)) {
          selectedOrder.push(text);

          // 建立 ㄅ + 韻母（每個符號直式）
          const div = document.createElement('div');
          div.classList.add('result-item');

          const symbols = text.split('');
          const bSpan = document.createElement('span');
          bSpan.textContent = 'ㄅ';
          div.appendChild(bSpan);
          symbols.forEach(ch => {
            const s = document.createElement('span');
            s.textContent = ch;
            div.appendChild(s);
          });

          resultDiv.appendChild(div);
        }

        tile.classList.add('correct');
        tile.classList.remove('wrong');
        playCorrect();

        // 全部選完顯示結果
        if (selectedOrder.length === goodFriends.length) {
          const finishMsg = document.createElement('div');
          finishMsg.classList.add('result-finish');
          finishMsg.textContent = hasWrong ? '完成' : '全部答對 🎉🎉🎉';
          resultDiv.appendChild(finishMsg);
          playFireworks();
        }
      } else {
        tile.classList.add('wrong');
        tile.classList.remove('correct');
        playWrong();
        hasWrong = true;
      }
    });
  });

  // 重新開始
  document.getElementById('resetBtn').addEventListener('click', () => {
    tiles.forEach(tile => {
      tile.classList.remove('correct', 'wrong', 'tone-selected');
    });
    selectedOrder = [];
    hasWrong = false;
    resultDiv.innerHTML = '';
  });
</script>

</body>
</html>
